<!DOCTYPE html>
<html>
  <head>
    <title>LojaXYZJ</title>
	<meta charset="utf-8" />
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/photon.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link href="responsive-calendar/0.9/css/responsive-calendar.css" rel="stylesheet" media="screen">
    <!-- Electron Javascript -->
    <!--<script src="app.js" charset="utf-8"></script>-->
  </head>

  <body>
    <!-- Wrap your entire app inside .window -->

	<div class="window">

	  <header class="toolbar toolbar-header">
		<h1 class="title">Loja XYZ</h1>
		 <div class="toolbar-actions">
			<div class="btn-group">
			  <a href="index.html" class="btn btn-default">
				<span class="icon icon-home"></span>
			  </a>
			  <!--<button class="btn btn-default">
				<span class="icon icon-folder"></span>
			  </button>
			  <button class="btn btn-default active">
				<span class="icon icon-cloud"></span>
			  </button>
			  <button class="btn btn-default">
				<span class="icon icon-popup"></span>
			  </button>
			  <button class="btn btn-default">
				<span class="icon icon-shuffle"></span>
			  </button>-->
			</div>

			<!--<button class="btn btn-default">
			  <span class="icon icon-home icon-text"></span>
			  Filters
			</button>

			<button class="btn btn-default btn-dropdown pull-right">
			  <span class="icon icon-megaphone"></span>
			</button>-->
	  </div>

	  </header>
	  <div class="window-content">
		<div class="pane-group">
		  <div class="pane-sm sidebar">
		  <nav class="nav-group">
  <h5 class="nav-group-title">Menu</h5>
  <a href="produtos.html" class="nav-group-item ">
    <span class="icon icon-layout"></span>
    Produtos
  </a>
  <a href="clientes.html" class="nav-group-item ">
    <span class="icon icon-users"></span>
    Clientes
  </a>
  <a href="vendas.html" class="nav-group-item">
    <span class="icon icon-check"></span>
    Vendas
  </a>
  <a href="fornecedor.html" class="nav-group-item">
    <span class="icon icon-user"></span>
    Fornecedor
  </a>
  <a href="compras.html" class="nav-group-item">
    <span class="icon icon-bag"></span>
    Compras
  </a>
  <a href="compras.html" class="nav-group-item">
    <span class="icon icon-menu"></span>
    Estoque
  </a>
</nav></div>

		  <!--div class="pane"> <div class="text-center">
                  <h4>Cad+</h4>
                  <p>Sistema de cadastro de vendas</p>
                   <img src="http://www.fambras.com.br/nova/images/lista_produtos_1_zps6b52c375.png" alt="">
               </div>
       </div-->
           <div class="pane">
             <ul class="list-group" >
                <li class="list-group-header">
                  <input class="form-control" type="text" placeholder="Search for someone">
                </li>
                <li class="list-group-item">
                  <img class="img-circle media-object pull-left" src="images/clientes.jpg" width="32" height="32">
                  <div class="media-body">
                    <strong>Clientes</strong>
                    <p>Lorem ipsum dolor sit amet.</p>
                  </div>
                </li>
                <li class="list-group-item">
                  <img class="img-circle media-object pull-left" src="images/produtos.png" width="32" height="32">
                  <div class="media-body">
                    <strong>Produtos</strong>
                    <p>Lorem ipsum dolor sit amet.</p>
                  </div>
                </li>
                <li class="list-group-item">
                  <img class="img-circle media-object pull-left" src="images/vendas.png" width="32" height="32">
                  <div class="media-body">
                    <strong>Vendas</strong>
                    <p>Lorem ipsum dolor sit amet.</p>
                  </div>
                </li>
              </ul>
           </div>
            <div class="pane">
        <div class="text-center">

          <!--CALENDARIO INICIO-->
          <div class="responsive-calendar">
            <div class="controls">
                <a class="pull-left" data-go="prev"><div class="btn btn-positive"><i class="icon icon-left"></i></div></a>
                <h4><span data-head-year></span> <span data-head-month></span></h4>
                <a class="pull-right" data-go="next"><div class="btn btn-positive"><i class="icon icon-right"></i></div></a>
            </div>
            <hr/>
            <div class="day-headers">
              <div class="day header">Segunda</div>
              <div class="day header">Terça</div>
              <div class="day header">Quarta</div>
              <div class="day header">Quinta</div>
              <div class="day header">Sexta</div>
              <div class="day header">Sabado</div>
              <div class="day header">Domingo</div>
            </div>
            <div class="days" data-group="days">
              <!-- the place where days will be generated -->
            </div>
          </div>
<!-- Responsive calendar - END -->
        </div>

		  </div>
		</div>
	  </div>
	  <footer class="toolbar toolbar-footer">
		<h1 class="title">Desenvolvido por AntunesWeb</h1>
	  </footer>

</div>
<!--ABERTURA DO MODAL DE EDIÇÃO-->

 <!--FECHAMENTO DO MODAL DE EDIÇÃO-->
  </body>
  <script src="responsive-calendar/0.9/js/jquery.js"></script>
  <script src="responsive-calendar/0.9/js/responsive-calendar.js"></script>
  <script>
  $( document ).ready( function() {
    $('.responsive-calendar').responsiveCalendar({
      translateMonths: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "junho", "Jullho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
      onMonthChange: function () { //Quando o mês(botão de PREV for clidado) mudado.
                        var mescorrente = $(this)[0].currentMonth + 1; //Variavel reagata mes corrente do calendario soma mais um ao mes para dezembro ser 12 e não 11.
                        var anocorrente = $(this)[0].currentYear; //Variavel reagata ano corrente do calendario
                        var dataCalendario = new Date(mescorrente + "/" + "01" + "/" + anocorrente); //Variavel onde cria uma nova data juntando mes do calendario, mais o primeiro dia e o ano do calendario.
                        var data = new Date(); //Variavel criando uma nova data
                        var newData = new Date(data.getTime() - 7948800000); //Variavel onde pega o tempo real( data e mes e ano) e diminui 3 meses em milisegundos

                        if (dataCalendario < newData) { //se a data do calendario for menor que a data real
                            $("#voltar").hide(); //esconde o botao de previous
                        } else { //senao
                            $("#voltar").show(); //volta com o botão
                        }
                    },
                    events:{
                      "2017-02-01": {"number": 1, "badgeClass": "badge-warning", "url": "http://w3widgets.com"}
                    }
    });
  });
  </script>
  <script>
       var read = require('read-file-utf8');
        var loki = require('lokijs');
        var db = new loki('db.json');
        var fileExists = require('file-exists');
        var data={};
        if(fileExists(__dirname+'/db.json')){
            data = read(__dirname+'/db.json');
            db.loadJSON(data);
        }else{
             db.addCollection('vendas');
            db.addCollection('clientes');
            db.addCollection('produtos');
            db.addCollection('fornecedor');
            db.addCollection('compras');
            db.addCollection('estoque');
            db.save();
        }

    window.Vue = require('vue/dist/vue.js');
    //console.log(db);
    var vendas = db.getCollection('vendas');
    var produtos = db.getCollection('produtos');

    var clientes = db.getCollection('clientes');
    console.log(db);
    new Vue({
      el: 'body',
      data: {
        clientes: [],
          mode:'',
          client:{
              nome:'',
              cpf:'',
              telefone:''
          },
        openModal: false
      },
      ready: function(){
        this.clientes = clientes.data;
        this.vendas = vendas.data;
        this.produtos = produtos.data;
        console.log(clientes.data);
      },
        methods:{
            editClient: function(client){
                this.mode='edicao';
                this.openModal = true;
                this.client=client;

            },
            createClient: function(){
                this.mode='cadastro';
                this.openModal = true;
                this.client = {
                    nome:'',
                    cpf:'',
                    telefone:''
                }

            },
            clientStoreOrUpdate: function(){
                if(typeof this.client.$loki != 'undefined'){
                    clientes.update(this.client)
                }else{
                    clientes.insert(this.client);
                }
                db.save();
                this.openModal=false;
            }
        }
    });

  </script>
</html>
